<rt-require dependency='../actions/Dimmer' as='DimmerActions' />
<rt-require dependency='../actions/Auth' as='AuthActions' />
<rt-require dependency='../actions/Session' as='SessionActions' />

<rt-require dependency='../components/Counter' as='Counter' />
<rt-require dependency='../components/UserWidget' as='UserWidget' />
<rt-require dependency='../components/RegisterWidget' as='RegisterWidget' />

<div
  id='navbar'
  class='ui container'
  rt-scope='this.props.dispatch as dispatch'
>
  <div class='ui inverted menu'>
    <a href='#' class='brand item'>
      <img class='ui mini image' src='brand.png'>
    </a>
    <a href='#' class='item'>Lobby</a>
    <a href='#' class='item'>About</a>

    <div class='right menu'>
      <div class='item'>
        <Counter
          onClick='{ () => dispatch(SessionActions.refreshSession()) }'
        />
      </div>
      <div class='item'>
        <UserWidget
          isAuthenticated='{ this.props.session.isAuthenticated }'
          loginAction='{ (u,p) => dispatch(AuthActions.loginUser(u,p)) }'
          logoutAction='{ () => dispatch(AuthActions.logoutUser()) }'
          isEnabled='{ this.props.dimmerVisible }'
          onOpen='{ () => dispatch(DimmerActions.show()) }'
          onClose='{ () => dispatch(DimmerActions.hide()) }'
        />
      </div>
      <div class='item'>
        <RegisterWidget
          registerAction='{ (u,p) => dispatch(AuthActions.registerUser(u,p)) }'
          isEnabled='{ this.props.dimmerVisible }'
          onOpen='{ () => dispatch(DimmerActions.show()) }'
          onClose='{ () => dispatch(DimmerActions.hide()) }'
        />
      </div>
    </div>
  </div>
</div>
